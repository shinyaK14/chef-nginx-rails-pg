# easy-rsa parameter settings

# This variable should point to
# the top level of the easy-rsa
# tree.
export EASY_RSA=<%= @node['openvpn']['key']['easy_rsa'] %>

#
# This variable should point to
# the requested executables
#
export OPENSSL=<%= @node['openvpn']['key']['openssl'] %>
export PKCS11TOOL=<%= @node['openvpn']['key']['pkcs11_tool'] %>
export GREP=<%= @node['openvpn']['key']['grep'] %>

# This variable should point to
# the openssl.cnf file included
# with easy-rsa.
export KEY_CONFIG=<%= @node['openvpn']['key']['key_config'] %>

# Edit this variable to point to
# your soon-to-be-created key
# directory.
#
# WARNING: clean-all will do
# a rm -rf on this directory
# so make sure you define
# it correctly!
export KEY_DIR=<%= @node['openvpn']['key']['key_dir'] %>

# Issue rm -rf warning
echo NOTE: If you run ./clean-all, I will be doing a rm -rf on $KEY_DIR

# PKCS11 fixes
export PKCS11_MODULE_PATH=<%= @node['openvpn']['key']['pkcs11_module_path'] %>
export PKCS11_PIN=<%= @node['openvpn']['key']['pkcs11_pin'] %>

# Increase this to 2048 if you
# are paranoid.  This will slow
# down TLS negotiation performance
# as well as the one-time DH parms
# generation process.
export KEY_SIZE=<%= @node['openvpn']['key']['size'] %>

# In how many days should the root CA key expire?
export CA_EXPIRE=<%= @node['openvpn']['key']['ca_expire'] %>

# In how many days should certificates expire?
export KEY_EXPIRE=<%= @node['openvpn']['key']['expire'] %>

# Certificate fields
export KEY_COUNTRY=<%= @node[:openvpn][:key][:country] %>
export KEY_PROVINCE=<%= @node[:openvpn][:key][:region] %>
export KEY_CITY=<%= @node[:openvpn][:key][:city] %>
export KEY_ORG=<%= @node[:openvpn][:key][:org] %>
export KEY_EMAIL=<%= @node[:openvpn][:key][:email] %>
export KEY_OU=<%= @node[:openvpn][:key][:org_unit] %>
export KEY_NAME=<%= @node[:openvpn][:key][:name] %>
